---
import Base from '../../layouts/Base.astro';
import { getCollection } from 'astro:content';
const posts = (await getCollection('posts')).sort(
  (a, b) => new Date(b.data.pubDate).getTime() - new Date(a.data.pubDate).getTime()
);
---

<Base title="Blog" description="Articoli pubblicati nel blog.">
  <h1 class="text-3xl font-bold mb-4">Blog</h1>
  <ul class="list-disc ml-6 space-y-1">
    {posts.map((p) => (
      <li>
        <a href={`${import.meta.env.BASE_URL}posts/${p.slug}/`} class="text-sky-600 hover:underline">
          {p.data.title}
        </a>
        <span class="text-slate-500 text-sm"> â€” {new Date(p.data.pubDate).toLocaleDateString('it-IT')}</span>
      </li>
    ))}
  </ul>
</Base>
